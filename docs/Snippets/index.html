<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Attestation Snippets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f5f5f7;
      --fg: #111827;
      --accent: #2563eb;
      --border: #d1d5db;
      --button-text: #ffffff;
      --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.12);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: var(--bg);
      color: var(--fg);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .page {
      padding: 1.25rem;
      max-width: 1400px;     /* wider for iPad landscape */
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    header h1 {
      font-size: 1.25rem;
      margin: 0;
      font-weight: 600;
    }

    header p {
      margin: .25rem 0 0;
      font-size: .9rem;
      color: #4b5563;
    }

    /* --- PREVIEW AREA (full-width) --- */

    .preview-container {
      display: grid;
      grid-template-columns: auto 1fr;  /* narrow copy button + full-width field */
      gap: .75rem;
      align-items: stretch;
      width: 100%;
    }

    .copy-preview-btn {
      border: none;
      border-radius: .75rem;
      padding: .75rem .9rem;
      font-weight: 600;
      font-size: .9rem;
      cursor: pointer;
      background: var(--accent);
      color: var(--button-text);
      box-shadow: var(--shadow-soft);
      white-space: nowrap;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: .15rem;
    }

    .copy-preview-btn span.small {
      font-size: .7rem;
      font-weight: 400;
      opacity: .9;
    }

    .preview-field {
      background: #fff;
      border-radius: .75rem;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border);
      padding: .5rem;
      display: flex;
      flex-direction: column;
      gap: .25rem;
      width: 100%;
    }

    .preview-label {
      font-size: .8rem;
      font-weight: 500;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .preview-textarea {
      width: 100%;
      resize: vertical;
      border-radius: .5rem;
      border: 1px solid #e5e7eb;
      padding: .6rem;
      font-size: .9rem;
      line-height: 1.4;
      font-family: inherit;
      min-height: 4.5rem; /* ~4 lines */
      outline: none;
    }

    .preview-textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37,99,235,.2);
    }

    .status {
      font-size: .8rem;
      color: #10b981;
      min-height: 1em;
    }

    /* --- 2-COLUMN SNIPPET LAYOUT --- */

    .snippets-container {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(2, 1fr);  /* fixed 3 columns */
      gap: 1rem;
      margin-top: .5rem;
      padding-bottom: .5rem;
    }

    .snippet-button {
      border: none;
      border-radius: 1rem;
      padding: 1.1rem;
      text-align: left;
      cursor: pointer;
      color: var(--button-text);
      font-weight: 600;
      font-size: .95rem;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      justify-content: center;
      transition: transform .08s ease, box-shadow .08s ease, filter .08s ease;
      min-height: 90px;
    }

    .snippet-button span.title { margin-bottom: .2rem; }
    .snippet-button span.subtitle { font-size: .75rem; opacity: .9; font-weight: 400; }

    .snippet-button:hover {
      transform: translateY(-2px);
      filter: brightness(1.05);
      box-shadow: 0 14px 30px rgba(15,23,42,.18);
    }

    .snippet-button:active { transform: translateY(0); filter: brightness(.97); }

    /* Unique colors per button */
    .snippet-button:nth-child(1){background:#2563eb;}
    .snippet-button:nth-child(2){background:#16a34a;}
    .snippet-button:nth-child(3){background:#ea580c;}
    .snippet-button:nth-child(4){background:#7c3aed;}
    .snippet-button:nth-child(5){background:#db2777;}
    .snippet-button:nth-child(6){background:#0d9488;}
    .snippet-button:nth-child(7){background:#f59e0b;color:#111827;}
    .snippet-button:nth-child(8){background:#64748b;}

    /* Fallbacks if the screen ever gets smaller than iPad-landscape */
    @media (max-width: 1024px){
      .snippets-container { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 700px){
      .preview-container { grid-template-columns: 1fr; }
      .snippets-container { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>Attestation Snippets</h1>
      <p>Click a snippet to copy it and load it into the editable preview.</p>
    </header>

    <div class="preview-container">
      <button id="copyPreviewBtn" class="copy-preview-btn" type="button">
        Copy<br/>Preview
        <span class="small">(to clipboard)</span>
      </button>

      <div class="preview-field">
        <div class="preview-label">
          <span>Preview / Scratch Pad</span>
          <span id="currentTitle" style="font-size:.75rem;color:#9ca3af;"></span>
        </div>

        <textarea id="previewTextarea"
                  class="preview-textarea"
                  placeholder="Click a snippet below, or type directly hereâ€¦"></textarea>

        <div id="status" class="status"></div>
      </div>
    </div>

    <div id="snippetsContainer" class="snippets-container"></div>
  </div>

  <script>
    const snippets = [
      { title:'Resident Encounter', text:`I saw and evaluated the patient (subsequent to and / or at the time of initial resident visit). I was present for and participated in key portions of the history, physical examination, and medical decision making for this patient encounter. I have reviewed the resident's documentation and agree with the assessment and plan.` },
      { title:'NP Unattended Encounter', text:`I reviewed the case and documentation and discussed findings and management with the APP. I agree with the assessment and plan.` },
      { title:'NP Seen by Attending Encounter (non-CC)', text:`I personally performed a substantive portion of the patient visit, including independent history taking, examination, and medical decision making (providing substantive care representing greater than 50% of total encounter time). I have reviewed and agree with the documentation provided by the NP/PA and have confirmed the assessment and plan.` },
      { title:'Critical Care Encounter', text:`I personally evaluated the patient, assessed their critical illness, and provided active critical care management. I Have reviewed the documentation provided by the resident/NP/PA and agree with the assessment and plan as documented. 

The patient is critically ill due to their clinical condition and is at risk for neurological deterioration. I personally spent [35] minutes caring for this critically ill patient.` },
      { title:'Stroke Alert Encounter', text:`This patient was seen in the context of a stroke alert. I personally evaluated the patient, assessed their critical illness, and provided active critical care management. I Have reviewed the documentation provided by the resident/NP/PA and agree with the assessment and plan as documented. 

Care provided included and was not limited to: direct confirmation of pertinent elements of history and examination, coordination of stroke team members, realtime direct preliminary review of imaging, thrombolytic decision making, assessment of candidacy for endovascular intervention, and provision of neurological impressions and recommendations in real time.

Given clinical context of stroke alert at the time of the encounter the patient was presumed to be critically ill and at risk for neurological deterioration, leading to provision of direct and immediate care at the exclusion of other activities. I personally spent [35] minutes providing care for this critically ill patient during this encounter.` },
      { title:'Telestroke Encounter', text:`I personally evaluated the patient, assessed their critical illness, and provided active critical care management. I Have reviewed the documentation provided by the resident/NP/PA and agree with the assessment and plan as documented. 

Initial stroke alert consultation was performed via a secure real-time audio-video platform. I conducted a live, interactive video evaluation of the patient with on-site clinical staff present as needed. 

Care provided included and was not limited to: direct confirmation of pertinent elements of history and examination, coordination of stroke team members, realtime direct preliminary review of imaging, thrombolytic decision making, assessment of candidacy for endovascular intervention, and provision of neurological impressions and recommendations in real time.

Given clinical context of stroke alert at the time of the encounter the patient was presumed to be critically ill and at risk for neurological deterioration, leading to provision of direct and immediate care at the exclusion of other activities. I personally spent [35] minutes providing care for this critically ill patient during this encounter.` },
      { title:'Patient Already Discharged', text:`This patient was discussed on attending rounds however the patient was discharged prior to being evaluated by the undersigned; A/P as written by the resident reflects the discussion but findings were not confirmed by me on this DOS.` },
      { title:'"Not Stroke Alert"', text:`Note - this encounter reflects a consultation visit separate from (subsequent to) a stroke alert; see original stroke alert note for documentation of initial acute decision making.` },
    ];

    const snippetsContainer=document.getElementById('snippetsContainer');
    const previewTextarea=document.getElementById('previewTextarea');
    const copyPreviewBtn=document.getElementById('copyPreviewBtn');
    const statusEl=document.getElementById('status');
    const currentTitleEl=document.getElementById('currentTitle');

    function showStatus(msg,err=false){
      statusEl.textContent=msg;
      statusEl.style.color=err?'#ef4444':'#10b981';
      if(msg){ setTimeout(()=>statusEl.textContent='',1500); }
    }

    function copyToClipboard(text){
      if(navigator.clipboard?.writeText){
        navigator.clipboard.writeText(text).then(
          ()=>showStatus('Copied to clipboard.'),
          ()=>fallbackCopy(text)
        );
      } else fallbackCopy(text);
    }

    function fallbackCopy(text){
      try{
        const t=document.createElement('textarea');
        t.value=text; t.style.position='fixed'; t.style.left='-9999px';
        document.body.appendChild(t); t.select(); document.execCommand('copy');
        document.body.removeChild(t); showStatus('Copied to clipboard.');
      } catch{ showStatus('Unable to copy.',true); }
    }

    snippets.forEach((snip,i)=>{
      const btn=document.createElement('button');
      btn.type='button'; btn.className='snippet-button'; btn.dataset.index=i;
      btn.innerHTML=`<span class="title">${snip.title}</span><span class="subtitle">Click to copy & load into preview</span>`;
      btn.addEventListener('click',()=>{
        previewTextarea.value=snip.text;
        currentTitleEl.textContent=snip.title;
        copyToClipboard(snip.text);
      });
      snippetsContainer.appendChild(btn);
    });

    copyPreviewBtn.addEventListener('click',()=>{
      const text=previewTextarea.value||'';
      if(!text.trim()) return showStatus('Preview is empty.',true);
      copyToClipboard(text);
    });
  </script>
</body>
</html>
